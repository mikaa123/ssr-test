{"version":3,"sources":["../src/index.js"],"names":["app","port","use","handleRender","renderFullPage","html","preloadedState","req","res","store","getState","send","JSON","stringify","listen"],"mappings":";;AAAA;;;;AACA;;;;AACA;;;;AACA;;AACA;;AACA;;AACA;;;;;;AACA;;AAEA,IAAMA,MAAM,wBAAZ;AACA,IAAMC,OAAO,IAAb;;AAEA;AACAD,IAAIE,GAAJ,CAAQC,YAAR;;AAEA;AACA,SAASC,cAAT,CAAwBC,IAAxB,EAA8BC,cAA9B,EAA8C,CAAE,SAAW;;AAE3D,SAASH,YAAT,CAAsBI,GAAtB,EAA2BC,GAA3B,EAAgC;AAC9B;AACA,MAAMC,QAAQ,2CAAd;;AAEA;AACA,MAAMJ,OAAO,4BACX;AAAA;AAAA,MAAU,OAAOI,KAAjB;AACE,kCAAC,GAAD;AADF,GADW,CAAb;;AAMA;AACA,MAAMH,iBAAiBG,MAAMC,QAAN,EAAvB;;AAEA;AACAF,MAAIG,IAAJ,CAASP,eAAeC,IAAf,EAAqBC,cAArB,CAAT;AACD;;AAED,SAASF,cAAT,CAAwBC,IAAxB,EAA8BC,cAA9B,EAA8C;AAC5C,mKAOuBD,IAPvB,qPAWuCO,KAAKC,SAAL,CAAeP,cAAf,CAXvC;AAiBD;;AAEDN,IAAIc,MAAJ,CAAWb,IAAX","file":"index.js","sourcesContent":["import path from 'path'\nimport express from 'express'\nimport React from 'react'\nimport { createStore } from 'redux'\nimport { Provider } from 'react-redux'\nimport { renderToString } from 'react-dom/server'\nimport counterApp from '../client/reducers'\n// import App from './containers/App'\n\nconst app = express()\nconst port = 3000\n\n// This is fired every time the server side receives a request\napp.use(handleRender)\n\n// We are going to fill these out in the sections to follow\nfunction renderFullPage(html, preloadedState) { /* ... */ }\n\nfunction handleRender(req, res) {\n  // Create a new Redux store instance\n  const store = createStore(counterApp)\n\n  // Render the component to a string\n  const html = renderToString(\n    <Provider store={store}>\n      <App />\n    </Provider>\n  )\n\n  // Grab the initial state from our Redux store\n  const preloadedState = store.getState()\n\n  // Send the rendered page back to the client\n  res.send(renderFullPage(html, preloadedState))\n}\n\nfunction renderFullPage(html, preloadedState) {\n  return `\n    <!doctype html>\n    <html>\n      <head>\n        <title>Redux Universal Example</title>\n      </head>\n      <body>\n        <div id=\"root\">${html}</div>\n        <script>\n          // WARNING: See the following for Security isues with this approach:\n          // http://redux.js.org/docs/recipes/ServerRendering.html#security-considerations\n          window.__PRELOADED_STATE__ = ${JSON.stringify(preloadedState)}\n        </script>\n        <script src=\"/static/bundle.js\"></script>\n      </body>\n    </html>\n    `\n}\n\napp.listen(port)\n"]}